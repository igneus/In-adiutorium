\documentclass[a5paper, twoside]{article}
\usepackage[utf8]{inputenc}

\usepackage[czech]{babel} 

\usepackage[left=2cm, right=1.5cm, top=2cm, bottom=1cm]{geometry} % okraje stranky
\usepackage[colorlinks=true, citecolor=black, linkcolor=black, urlcolor=black]{hyperref} % hypertextove odkazy
\usepackage{datetime} % formaty data
\usepackage{multicol} % sazba ve sloupcich
\usepackage{lettrine} % inicialky
\usepackage{fancyhdr} % hlavicky stranek
\usepackage{color} % barevny text

% potreba pro znacky.tex:
\usepackage{zref-savepos}
\usepackage{changepage}
\usepackage{etoolbox}

\usepackage[T1]{fontenc}
% font Bookman:
\usepackage{bookman}

\input{spolecne.tex}
\input{znacky.tex}

% !!!! KE ZLOMU: 24.3.2012 jsem musel pri zlomu zasahovat i do automaticky
% generovanych souboru (zalmy; dokonce i do textu jednoho kantika!).
% Kniha tedy obsahuje nektere zlomove znacky, ale ne vsechny. !!!

\newcommand{\autor}{}
\newcommand{\soubornyNazev}{Antifonář k Denní modlitbě církve}
\newcommand{\cisloSvazku}{5}
\newcommand{\nazev}{Žaltář pro slavnosti a svátky}

\renewcommand{\tirazSazbaProgramem}{
  Vysázeno programem \LaTeX.
}
\newcommand{\textDoTiraze}{
  Texty Denní modlitby církve jsou majetkem České biskupské konference. 
  
  Texty žalmů a kantik jsou převzaté z webu \url{http://ebreviar.cz},
  jehož tvůrcům za jejich práci tímto srdečně děkuji.
  Z textů je vypuštěno to, co se zdá být pro modlitbu v chóru
  nadbytečné nebo rušivé (číslování žalmů i podle Vulgáty,
  nadpisy žalmů a připojené citáty z Písma a Otců)
  a kde jsem shledal odchylky od vydání breviáře z r. 1994, jsou
  podle něj opraveny.
  
  Text žalmů a kantik značkami opatřil a k sazbě připravil Jakub Pavlík.
}

\newenvironment{hora}{
  \begin{multicols}{2}
}{
  \end{multicols}
}

\newenvironment{psalmus}{}{}

\newcommand{\rubrikaZalmBylvInvitatoriu}{
  \rubrika{Pokud se následující žalm zpíval jako invitatorium,
  nahradí se zde žalmem 95, str. \pageref{zalm24}.}
}

\newcommand{\laudyNedelePrvnihoTydne}{
  \mbox{Žalmy nedělní z 1. týdne, str. \pageref{zalmyne1trch}}}

% Vytvori pro text (zalm/kantikum) label a polozku v obsahu
% label, citelny nazev
\newcommand{\labelText}[2]{
  \label{#1}
  \addcontentsline{toc}{subsection}{#2}
}

% Staci jediny argument - cislo zalmu
\newcommand{\labelZalm}[1]{
  \labelText{z#1}{Žalm #1}
  }

\newcommand{\zalmRef}[1]{
  Žalm #1, str. \pageref{z#1}}

\newcommand{\textRef}[2]{
  #2, str. \pageref{#1}}

\begin{document}

\pagestyle{empty}

\titulniStrankaSvazkuAntifonare

\prazdnaStranka

% Nastaveni sazby do sloupcu:
\setlength{\columnseprule}{1pt} % cara oddelujici sloupce
\setlength{\columnsep}{20pt} % prostor mezi sloupci

\fancyhead{}
\fancyhead[LE,RO]{\thepage}
\fancyfoot{}

\pagestyle{fancy}

\section{Kantika z evangelií}
\fancyhead[CE,CO]{Kantika z evangelií}

\begin{hora}
\labelText{ben}{Zachariášovo kantikum}
\input{generovane/zaltar/kantikum_benedictus.tex}
\columnbreak
\labelText{mag}{kantikum Panny Marie}
\input{generovane/zaltar/kantikum_magnificat.tex}
\end{hora}

\clearpage
\section{Žalmy invitatoria}
\fancyhead[CE,CO]{Invitatorium}

\begin{hora}
\labelZalm{95}
\input{generovane/svatecnizaltar/zalm95.tex}
\columnbreak % ZLOM1
\labelZalm{100}
\input{generovane/svatecnizaltar/zalm100.tex}
\labelZalm{67}
\input{generovane/svatecnizaltar/zalm67.tex}
\labelZalm{24}
\input{generovane/svatecnizaltar/zalm24.tex}
\end{hora}

\clearpage
\section{Často užívané celky}

\subsection{Neděle 1. týdne - ranní chvály}
\fancyhead[CE,CO]{Ranní chvály neděle 1. týdne}

\ranniChvaly
\begin{hora}
\label{zalmyne1trch}
\input{generovane/svatecnizaltar/zalm63.tex}
\input{generovane/svatecnizaltar/kantikum_dan3iii.tex}
\input{generovane/svatecnizaltar/zalm149.tex}
\end{hora}

\subsection{Doplňovací cyklus žalmů pro modlitbu uprostřed dne}
\fancyhead[CE,CO]{Doplňovací cyklus}

\label{zalmydoplncyklus}
\nadpisHodinka{První oddíl (dopoledne)}
\begin{hora}
\input{generovane/svatecnizaltar/zalm120.tex}
\input{generovane/svatecnizaltar/zalm121.tex}
\input{generovane/svatecnizaltar/zalm122.tex}
\end{hora}

\nadpisHodinka{Druhý oddíl (v poledne)}
\begin{hora}
\input{generovane/svatecnizaltar/zalm123.tex}
\input{generovane/svatecnizaltar/zalm124.tex}
\input{generovane/svatecnizaltar/zalm125.tex}
\end{hora}

\nadpisHodinka{Třetí oddíl (odpoledne)}
\begin{hora}
\input{generovane/svatecnizaltar/zalm126.tex}
\input{generovane/svatecnizaltar/zalm127.tex}
\input{generovane/svatecnizaltar/zalm128.tex}
\end{hora}

\clearpage
\section{Žalmy}
\fancyhead[CE,CO]{Žalmy}

\begin{hora}
% soubor generovany skriptem listofpsalms.rb:
\input{generovane/svatecnizaltar/svatecnizaltar_index.txt.psalms.tex}
\end{hora}

\clearpage
\section{Starozákonní kantika}
\fancyhead[CE,CO]{Starozákonní kantika}

\begin{hora}
\labelText{kantiz38}{Iz 38}
\input{generovane/svatecnizaltar/kantikum_iz38.tex}
\columnbreak % ZLOM3
\labelText{kanthab3}{Hab 3}
\input{generovane/svatecnizaltar/kantikum_hab3.tex}
\end{hora}

\clearpage
\section{Novozákonní kantika}
\fancyhead[CE,CO]{Novozákonní kantika}

\begin{hora}
\labelText{kantef1}{Ef 1}
\input{generovane/svatecnizaltar/kantikum_ef1.tex}
\columnbreak % ZLOM3
\labelText{kantfp2}{Flp 2}
\input{generovane/svatecnizaltar/kantikum_fp2.tex}
\labelText{kantkol1}{Kol 1}
\input{generovane/svatecnizaltar/kantikum_kol1.tex}
\labelText{kant1tim3}{1 Tim 3}
\input{kantikum_1tim3.tex}
\labelText{kant1petr2}{1 Petr 2}
\input{generovane/svatecnizaltar/kantikum_1petr2.tex}
\labelText{kantzj4}{Zj 4}
\input{generovane/svatecnizaltar/kantikum_zj4.tex}
\labelText{kantzj11}{Zj 11}
\input{generovane/svatecnizaltar/kantikum_zj11.tex}
\labelText{kantzj15}{Zj 15}
\input{generovane/svatecnizaltar/kantikum_zj15.tex}
\labelText{kantzj19}{Zj 19}
\input{kantikum_zj19.tex}
\end{hora}

\clearpage
\section{Index svátků}
\fancyhead[CE,CO]{Index svátků}

% generovany soubor
\input{generovane/svatecnizaltar/svatecnizaltar_index.txt.index.tex}

\clearpage
\pagestyle{empty} % bez hlavicky a bez cisla stranky
\tableofcontents

\clearpage
\tirazSvazkuAntifonare

\end{document}
